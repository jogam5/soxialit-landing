<h2 style="color:#555; font-weight:lighter">Editar Post</h2>
<div class="row">
  <div class="span8">
	<%= form_for(@post) do |f| %>
	  <div class="field">
	    <p>Título</p>
	    <%= f.text_field :title %>
	  </div>
	  <p>Post <i>(máximo 750 caracteres)</i></p>
	  <%= f.text_area :body, :class => ".do_ckeditor" %>
	  <p><i>Límite:</i> <span id="count">750</span></p>

	  <div class="field">
	    <br />
	  <p>Frase:</p>
	    <%= f.text_field :quote %>
	  </div>
	  <div class="actions">
	    <%= f.submit 'Actualizar Post', :class => 'button-want' %>
	  </div>
	<% end %>
  </div>
  <div class="span4">
    <p>Agrega hasta 10 imágenes al Micropost:</p>
    <%= form_for(Slide.new, :remote => true) do |f| %>
      <%= f.hidden_field :post_id, :value => @post.id %>
      <%= f.file_field :picture, multiple: true, name: "slide[picture]"%>
    <% end %>
    <div id="display_slides">
      <% if @slides.present? %>
        <% @slides.each do |s| %>
           <div id="slide_<%=s.id%>">
           	  <%= image_tag(s.picture_url, :width => 100) %>
              <%= link_to "Eliminar", s, method: :delete, remote: true %>
              <hr />
           </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<script type="text/javascript">
var CKEDITOR_BASEPATH = '/assets/ckeditor/';
</script>

<script type="text/javascript">
$(function() {
    var editor = CKEDITOR.replace('post_body');
    global = editor;
    setInterval("updateCount()", 500);
});

function updateCount() {
    almost = global.getData();
    var count = 758 - almost.length;
    $('#count').html(almost.length);
    if(almost.length <= 750)
      $('#count').html(count);
    else
      $('#count').html(count)
}
</script>

<script id="template-upload" type="text/x-tmpl">
  <div id="name" style="display:none">
    <div class="upload">
      <div class="span2">
        {%=o.name%}
          <div class="progress"><div class="bar" style="width: 0%"></div></div>
      </div
    </div>
  </div>
</script>